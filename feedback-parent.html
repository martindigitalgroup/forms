<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Feedback</title>
  <style>
    /* General styling */
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 20px;
    }

    #responses {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    /* Styling for each SVG button */
    .feedback-option {
      width: 80px;
      height: 80px;
      cursor: pointer;
      transition: transform 0.2s ease, background-color 0.2s ease;
    }

    .feedback-option:hover {
      transform: scale(1.1);
    }

    .selected {
      background-color: #d4f4dd;
      border-radius: 50%;
    }

    /* Submit button */
    #submitButton {
      display: none;
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #2563EB;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.2s ease, transform 0.2s ease;
    }

    #submitButton:hover {
      background-color: #1e4db7;
      transform: scale(1.05);
    }

    #submitButton:disabled {
      background-color: #b3c6f3;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <h1>How are you feeling today?</h1>

  <!-- Container for SVG buttons -->
  <div id="responses" role="group" aria-label="Feedback options">
    <div id="crying" class="feedback-option" onclick="selectResponse('Crying')" aria-label="Crying">
      <!-- Insert SVG for Crying here -->
    </div>
    <div id="sad" class="feedback-option" onclick="selectResponse('Sad')" aria-label="Sad">
      <!-- Insert SVG for Sad here -->
    </div>
    <div id="neutral" class="feedback-option" onclick="selectResponse('Neutral')" aria-label="Neutral">
      <!-- Insert SVG for Neutral here -->
    </div>
    <div id="happy" class="feedback-option" onclick="selectResponse('Happy')" aria-label="Happy">
      <!-- Insert SVG for Happy here -->
    </div>
    <div id="excited" class="feedback-option" onclick="selectResponse('Excited')" aria-label="Excited">
      <!-- Insert SVG for Excited here -->
    </div>
  </div>

  <!-- Submit button -->
  <button id="submitButton" onclick="submitResponse()" disabled>Submit</button>

  <script>
    let selectedResponse = null;

    function selectResponse(response) {
      // Clear previous selection
      document.querySelectorAll('.feedback-option').forEach(option => {
        option.classList.remove('selected');
      });

      // Mark the selected option
      selectedResponse = response;
      document.getElementById(response.toLowerCase()).classList.add('selected');

      // Enable the Submit button
      const submitButton = document.getElementById('submitButton');
      submitButton.disabled = false;
      submitButton.style.display = 'inline-block';
    }

    function submitResponse() {
      if (!selectedResponse) {
        alert("Please select a response before submitting.");
        return;
      }

      const webhookUrl = "https://hooks.zapier.com/hooks/catch/15554156/2at36b2/";
      const formData = new URLSearchParams();
      formData.append('response', selectedResponse);

      // Parse URL query parameters and add them to the webhook data
      const urlParams = new URLSearchParams(window.location.search);
      urlParams.forEach((value, key) => {
        formData.append(key, value);
      });

      // Send the POST request
      fetch(webhookUrl, {
        method: "POST",
        body: formData
      })
      .then(response => {
        if (response.ok) {
          alert("Your feedback has been submitted. Thank you!");
          console.log("Webhook sent successfully!");
        } else {
          alert("There was an issue submitting your feedback. Please try again.");
          console.error("Failed to send webhook");
        }
      })
      .catch(err => {
        alert("An error occurred while submitting your feedback.");
        console.error("Error sending webhook:", err);
      });
    }
  </script>
</body>
</html>
